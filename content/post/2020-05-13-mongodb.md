---
title: mongodb
date: 2020-05-13
---

## install mongodb

```
cat /etc/yum.repos.d/mongodb.repo
[mongodb]
name=MongoDB Repository
baseurl=http://repo.mongodb.org/yum/redhat/8Server/mongodb-org/4.2/x86_64/
gpgcheck=0
enabled=1

sudo dnf install mongodb-org

sudo systemctl enable mongod
sudo systemctl start mongod
```

## edit config

```
vim /etc/mongod.conf
systemctl reload mongod
```

## add users

```
$ mongo
> use admin
> db.createUser({user:"admin",pwd:"123456",roles:["root"]})
> db.system.users.find()
> db.auth("admin", "123456")

> use net
> db.createUser({user:"root",pwd:"123456",roles:[{role:"dbOwner",db:"net"}]})
> use admin
> db.system.users.find()
> use net
> db.dropUser("root")

> use test
> db.createUser({user:"test",pwd:"test",roles:[{role:"readWrite",db:"test"}]})

$ cat /etc/mongod.conf
security:
  authorization: enabled

> exit
```

## Change permission

```
$ mongo
> use admin
> db.auth('admin', 'password')
> use test
> db.updateUser('user_name', { roles : [{ role : 'readWrite',  db : 'test'}]})

> use admin
> db.system.users.find()

```
